{% extends "base.html" %}{% block content %}{% raw %}<div id="app" v-bind:class="{ready: isReady}">    <h3 class="header">Устройства СГ</h3>    <!-- MainView -->    <div class="section" v-for="device in devices">                <div class="card">            <div class="card-content">                <p class="card-title">{{ device.name }}</p>                                <p><i class="material-icons tiny">school</i> {{ device.comment }}</p>                                <span class="new badge" data-badge-caption="%" :class="resolveStatusClassName(device.status)">Состояние объекта {{ device.status }}</span>            </div>            <div class="card-action">                <i class="material-icons tiny">date_range</i>                <span>Добавлено в систему {{ momentWr(device.created) }}</span>            </div>            <div class="card-action" v-if="device.actual_signals.length > 0">                <table class="striped">                    <thead>                        <tr>                            <th>Узел</th>                            <th width="70" title="Текущее значение"><i class="material-icons tiny">timeline</i></th>                            <th width="70" title="Тех. обслуж."><i class="material-icons tiny">build</i></th>                            <th width="70" title="Замена"><i class="material-icons tiny">flag</i></th>                            <th width="70"></th>                        </tr>                    </thead>                    <tbody>                        <tr v-for="signal in device.actual_signals">                            <td>{{ signal.type_signal.name }}</td>                            <td>{{ getLastSignalSample(signal) }}</td>                            <td :title="`Обслуживание при ${signal.type_signal.service}`">{{ getSignalService(signal) }}</td>                            <td :title="`Вывод из эксплуатации при ${signal.type_signal.shift}`">{{ getSignalShift(signal) }}</td>                            <td>                                <a v-if="signal.primary_ar_model" href="#" @click.prevent="showSignal(device, signal)" class="waves-effect waves-light btn" title="Временная диаграмма">                                    <i class="material-icons tiny">chevron_right</i>                                </a>                            </td>                        </tr>                    </tbody>                </table>            </div>            <div class="card-action">                <a v-if="canRecalcDevice(device)" @click.prevent="recalcDevice(device)" href="#"><i class="material-icons tiny">update</i> Обновить прогноз</a>                <a :href="device._links.self" target="blank"><i class="material-icons tiny">settings</i> Открыть в панеле</a>            </div>        </div>    </div>    <!-- /MainView -->    <!-- SignalChartView -->    <div class="popup closeOnClk" :class="{ show: showPopup }" v-if="showPopup" @click="hidePopup">        <div class="popup-content">            <div class="popup-header"><b>{{ selDevice.name }}: {{ selSignal.type_signal.name }}</b></div>            <div class="popup-close closeOnClk"></div>            <line-chart class="chart-wrapper"></line-chart>            <div class="popup-footer">                <span>Текущее значение {{ getLastSignalSample(selSignal) }}</span><br>                <span>Техническое обcлуживание через {{ getSignalService(selSignal) }} такт(ов)</span>                <span>, значение {{ selSignal.type_signal.service }}</span><br>                <span>Замена через {{ getSignalShift(selSignal) }} такт(ов)</span>                <span>, значение {{ selSignal.type_signal.shift }}</span><br>            </div>                    </div>    </div>    <!-- /SignalChartView --></div><div class="progress">    <div class="indeterminate"></div></div>{% endraw %}    <p><a target="blank" href="{{ url_for('admin.index') }}">Панель управления</a></p>{% endblock %}{% block scripts %}{{ super() }}<script src="/static/js/libs/moment.js"></script><script src="/static/js/libs/chart.min.js"></script><script src="/static/js/libs/chartjs-plugin-annotation.min.js"></script><script src="/static/js/libs/vue-chartjs.min.js"></script><script src="/static/js/libs/vue.js"></script><script src="/static/js/machine-adv.js"></script>{% endblock %}